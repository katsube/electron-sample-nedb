<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>AppStore売上ランキング</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>
<body>

<h1>AppStore売上ランキング</h1>
<ol id="result"></ol>

<script>
window.onload = async ()=>{
  // メインプロセスからデータ取得
  const rank = await getRanking()

  // 表示する
  rank.forEach((item)=>{
    addList('#result', item.title)
  })
}

/**
 * ランキングを取得
 */
async function getRanking(){
  const ranking = await window.myapi.getRanking()
  return(ranking)
}

/**
 * リストに追加する
 */
function addList(id, label){
  const result = document.querySelector(id)
  const li = document.createElement('li')
  const text = document.createTextNode(label)
  li.appendChild(text)
  result.appendChild(li)
}
</script>
</body>
</html>
